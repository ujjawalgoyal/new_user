//= ========================= Load Modules Start =======================

const _ = require("lodash");
const profileRouter = require("express").Router();
const resHndlr = require("../resHandler");
const profileFacade = require("../profile/profileFacade");
const middleware = require("../middleware");


//= =============================== Load module end =====================
// Route to save data in folder
profileRouter.route("/saveData")
    .post([middleware.authentication.autntctTkn, middleware.multer.singleFile(image)], (req, res) => {
        const params = _.pick(req.body, ["parent_folder_id", "folder_name"]);
        params.image = req.file;
        profileFacade.createUserDocument(params)
            .then((result) => {
                resHndlr.sendSuccessWithMsg(res, result);
            })
            .catch((err) => {
                resHndlr.sendError(res, err);
            });
    });

//= =============================== Export route ================================
module.exports = profileRouter;