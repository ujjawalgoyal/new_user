

//= ========================= Load Modules Start =======================

//= ========================= Load external modules ====================

const nodemailer = require("nodemailer");


//= ========================= Load internal modules ====================

const config = require("../config");

//= ========================= Load Modules End ==============================================

let transporter;
if (!transporter) {
  console.log("initializing mail transport");
  transporter = nodemailer.createTransport(config.env.mailTransporter);
}

function sendMail(options, cb) {
  return transporter.sendMail(options, (err, info) => {
    if (cb) {
      cb(err, info);
    }
    console.log("err =", err);
    console.log("info =", info);
  });
}

//= ========================= Export Module Start ===========================

module.exports = {
  sendMail,
};

//= ========================= Export module end ==================================
